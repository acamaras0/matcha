{"ast":null,"code":"var _jsxFileName = \"/goinfre/acamaras/apache2/htdocs/matcha/front/src/components/ProfileForm.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, Navigate } from \"react-router-dom\";\nimport Gender from \"../models/Gender\";\nimport Tags from \"../models/Tags\";\nimport Age from \"../models/Age\";\nimport Orientation from \"../models/Orientation\";\nimport { useCookies } from \"react-cookie\";\nimport \"../App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProfileForm = () => {\n  _s();\n\n  const [loggedIn, setLoggedin] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [orientation, setOrientation] = useState(\"\");\n  const [interests, setInterests] = useState([]);\n  const [bio, setBio] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const history = useNavigate();\n  const [cookie, setCookie] = useCookies([\"refreshToken\"]);\n  useEffect(() => {\n    const getLoggedIn = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/user/${cookie.refreshToken}`);\n        setLoggedin(response.data);\n      } catch (error) {\n        if (error.response) {\n          history(\"/\");\n        }\n      }\n    };\n\n    getLoggedIn();\n  }, [cookie.refreshToken, history]);\n\n  const profileFill = async e => {\n    e.preventDefault();\n\n    try {\n      await axios.post(`http://localhost:5000/fill`, {\n        birthdate: age,\n        gender: gender,\n        orientation: orientation,\n        interests: interests,\n        bio: bio\n      });\n      history(\"/pictures\");\n    } catch (error) {\n      if (error.response) {\n        setMessage(error.response.data.msg);\n      }\n    }\n  };\n\n  if (!cookie.refreshToken) {\n    history(\"/\");\n  }\n\n  if (loggedIn && loggedIn.birthdate) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Auth-form-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"Auth-form\",\n        onSubmit: profileFill,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Auth-form-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"Auth-form-title\",\n            children: \"Complete profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Age\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Age, {\n                setAge: setAge\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 72,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Gender\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Gender, {\n              setGender: setGender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Sexual orientation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Orientation, {\n              setOrientation: setOrientation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Interests\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mt-3\",\n              children: /*#__PURE__*/_jsxDEV(Tags, {\n                setInterests: setInterests\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Bio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mt-3\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"form-control mt-1\",\n                type: \"text\",\n                onChange: e => {\n                  setBio(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2 mt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-outline-warning\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"http://localhost:3000/dashboard\",\n                children: \" Skip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"message\",\n            children: message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfileForm, \"TxHTDAfVDrCaIieD5yxaU82LE+E=\", false, function () {\n  return [useNavigate, useCookies];\n});\n\n_c = ProfileForm;\nexport default ProfileForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileForm\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","Navigate","Gender","Tags","Age","Orientation","useCookies","ProfileForm","loggedIn","setLoggedin","age","setAge","gender","setGender","orientation","setOrientation","interests","setInterests","bio","setBio","message","setMessage","history","cookie","setCookie","getLoggedIn","response","get","refreshToken","data","error","profileFill","e","preventDefault","post","birthdate","msg","target","value"],"sources":["/goinfre/acamaras/apache2/htdocs/matcha/front/src/components/ProfileForm.js"],"sourcesContent":["/* eslint-disable */\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate, Navigate } from \"react-router-dom\";\nimport Gender from \"../models/Gender\";\nimport Tags from \"../models/Tags\";\nimport Age from \"../models/Age\";\nimport Orientation from \"../models/Orientation\";\nimport { useCookies } from \"react-cookie\";\nimport \"../App.css\";\n\nconst ProfileForm = () => {\n  const [loggedIn, setLoggedin] = useState(\"\");\n  const [age, setAge] = useState(\"\");\n  const [gender, setGender] = useState(\"\");\n  const [orientation, setOrientation] = useState(\"\");\n  const [interests, setInterests] = useState([]);\n  const [bio, setBio] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const history = useNavigate();\n  const [cookie, setCookie] = useCookies([\"refreshToken\"]);\n\n  useEffect(() => {\n    const getLoggedIn = async () => {\n      try {\n        const response = await axios.get(\n          `http://localhost:5000/user/${cookie.refreshToken}`\n        );\n        setLoggedin(response.data);\n      } catch (error) {\n        if (error.response) {\n          history(\"/\");\n        }\n      }\n    };\n    getLoggedIn();\n  }, [cookie.refreshToken, history]);\n\n  const profileFill = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.post(`http://localhost:5000/fill`, {\n        birthdate: age,\n        gender: gender,\n        orientation: orientation,\n        interests: interests,\n        bio: bio,\n      });\n      history(\"/pictures\");\n    } catch (error) {\n      if (error.response) {\n        setMessage(error.response.data.msg);\n      }\n    }\n  };\n\n  if (!cookie.refreshToken) {\n    history(\"/\");\n  }\n  if (loggedIn && loggedIn.birthdate) {\n    return <Navigate to={\"/dashboard\"} />;\n  }\n  return (\n    <div>\n      <div className=\"Auth-form-container\">\n        <form className=\"Auth-form\" onSubmit={profileFill}>\n          <div className=\"Auth-form-content\">\n            <h3 className=\"Auth-form-title\">Complete profile</h3>\n            <div className=\"form-group mt-3\">\n              <div className=\"form-group mt-3\">\n                <label>Age</label>\n                <Age setAge={setAge} />\n              </div>\n              <br />\n              <label>Gender</label>\n              <Gender setGender={setGender} />\n              <br />\n              <label>Sexual orientation</label>\n              <Orientation setOrientation={setOrientation} />\n              <br />\n              <label>Interests</label>\n              <div className=\"form-group mt-3\">\n                <Tags setInterests={setInterests} />\n              </div>\n              <br />\n              <label>Bio</label>\n              <div className=\"form-group mt-3\">\n                <input\n                  className=\"form-control mt-1\"\n                  type=\"text\"\n                  onChange={(e) => {\n                    setBio(e.target.value);\n                  }}\n                />\n              </div>\n              <div className=\"d-grid gap-2 mt-3\">\n                <button className=\"btn btn-outline-warning\">Submit</button>\n                <a href=\"http://localhost:3000/dashboard\"> Skip</a>\n              </div>\n            </div>\n            <p className=\"message\">{message}</p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}