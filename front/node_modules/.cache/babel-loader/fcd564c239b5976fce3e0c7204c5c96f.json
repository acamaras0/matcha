{"ast":null,"code":"var _jsxFileName = \"/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/front/src/components/ProfileRandom.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable */\nimport useGetDistance from \"../utils/useGetDistance\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { UserContext } from \"../context/UserContext\";\nimport axios from \"axios\";\nimport StarRating from \"../models/StarRating\";\nimport Gallery from \"../models/Gallery\";\nimport { useCookies } from \"react-cookie\";\nimport img from \"../assets/yellow-heart.png\";\nimport img1 from \"../assets/broken-heart.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProfileRandom = ({\n  socket\n}) => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const {\n    selectedUser,\n    setSelectedUser\n  } = useContext(UserContext);\n  const [pics, setPics] = useState([]);\n  const [likes, setLikes] = useState(\"\");\n  const [loggedIn, setLoggedIn] = useState(\"\");\n  const [liked, setLiked] = useState(false);\n  const history = useHistory();\n  const distance = useGetDistance();\n  const [cookie, setCookie] = useCookies([\"refreshToken\"]);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/users/${id}`);\n        setSelectedUser(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    fetchData();\n\n    const getPicPath = async () => {\n      const response = await axios.get(`http://localhost:5000/user/pictures/${id}`, {});\n      setPics(response.data);\n    };\n\n    getPicPath();\n\n    const getLoggedIn = async () => {\n      const response = await axios.get(`http://localhost:5000/user/${cookie.refreshToken}`, {});\n      setLoggedIn(response.data.id);\n    };\n\n    getLoggedIn();\n\n    const count = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/user/fame/${id}`);\n        setLikes(response.data.fame);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    count();\n\n    const checkIfLiked = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/liked/${id}/${loggedIn}`);\n        setLiked(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    checkIfLiked();\n  }, [id, setSelectedUser, setLikes]);\n\n  const block = async id => {\n    try {\n      await axios.post(`http://localhost:5000/block/${loggedIn}/${id}`, {});\n      history.push(\"/dashboard\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleLike = async id => {\n    try {\n      const response = await axios.post(`http://localhost:5000/like/${loggedIn}/${id}`, {});\n      setMessage(response.data.msg);\n    } catch (error) {\n      if (error.response) {\n        console.log(\"error\", error.response.data);\n      }\n    }\n\n    socket.emit(\"sendNotification\", {\n      senderName: sender,\n      senderId: senderId,\n      receiverName: id,\n      type: \"like\"\n    });\n  };\n\n  const handleDislike = async id => {\n    try {\n      const response = await axios.post(`http://localhost:5000/like/${loggedIn}/${id}`, {});\n      setMessage(response.data.msg);\n    } catch (error) {\n      if (error.response) {\n        console.log(\"error\", error.response.data);\n      }\n    }\n\n    socket.emit(\"sendNotification\", {\n      senderName: sender,\n      senderId: senderId,\n      receiverName: id,\n      type: \"unlike\"\n    });\n  }; // var location = { ...distance };\n  // if (location[id - 1]) {\n  //   var getDistance = location[id - 1].distance / 1000;\n  // }\n\n\n  if (!cookie.refreshToken) {\n    history.push(\"/\");\n  }\n\n  if (!selectedUser && !distance) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 12\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center\",\n          children: [selectedUser.firstname, \" \", selectedUser.lastname]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: selectedUser.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StarRating, {\n          rating: likes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-img\",\n          children: /*#__PURE__*/_jsxDEV(Gallery, {\n            galleryImages: pics\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"10%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"heart-container\",\n              children: liked ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"like-container\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  onClick: () => f2(user.id),\n                  className: \"like\",\n                  src: img,\n                  acamaras: true,\n                  alt: \"Card cap\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 157,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dislike-container\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  onClick: () => f1(user.id),\n                  className: \"dislike\",\n                  src: img1,\n                  alt: \"Card cap\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Age\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: selectedUser.birthdate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Bio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: selectedUser.bio\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Gender\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: selectedUser.gender\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 182,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Sexual Orientation\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: selectedUser.orientation\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Interests\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-text\",\n                children: selectedUser.interests\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => block(selectedUser.id),\n            className: \"btn btn-danger\",\n            children: \"Block\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(ProfileRandom, \"/pcs/moZwtsRZEHpM9KeR/INPYg=\", false, function () {\n  return [useParams, useHistory, useGetDistance, useCookies];\n});\n\n_c = ProfileRandom;\nexport default ProfileRandom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileRandom\");","map":{"version":3,"sources":["/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/front/src/components/ProfileRandom.js"],"names":["useGetDistance","React","useContext","useEffect","useState","useParams","useHistory","UserContext","axios","StarRating","Gallery","useCookies","img","img1","ProfileRandom","socket","id","selectedUser","setSelectedUser","pics","setPics","likes","setLikes","loggedIn","setLoggedIn","liked","setLiked","history","distance","cookie","setCookie","fetchData","response","get","data","error","console","log","getPicPath","getLoggedIn","refreshToken","count","fame","checkIfLiked","block","post","push","handleLike","setMessage","msg","emit","senderName","sender","senderId","receiverName","type","handleDislike","firstname","lastname","username","margin","f2","user","f1","birthdate","bio","gender","orientation","interests"],"mappings":"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","sourcesContent":["/* eslint-disable */\nimport useGetDistance from \"../utils/useGetDistance\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { UserContext } from \"../context/UserContext\";\nimport axios from \"axios\";\nimport StarRating from \"../models/StarRating\";\nimport Gallery from \"../models/Gallery\";\nimport { useCookies } from \"react-cookie\";\nimport img from \"../assets/yellow-heart.png\";\nimport img1 from \"../assets/broken-heart.png\";\n\nconst ProfileRandom = ({ socket }) => {\n  const { id } = useParams();\n  const { selectedUser, setSelectedUser } = useContext(UserContext);\n  const [pics, setPics] = useState([]);\n  const [likes, setLikes] = useState(\"\");\n  const [loggedIn, setLoggedIn] = useState(\"\");\n  const [liked, setLiked] = useState(false);\n  const history = useHistory();\n  const distance = useGetDistance();\n  const [cookie, setCookie] = useCookies([\"refreshToken\"]);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/users/${id}`);\n        setSelectedUser(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    fetchData();\n\n    const getPicPath = async () => {\n      const response = await axios.get(\n        `http://localhost:5000/user/pictures/${id}`,\n        {}\n      );\n      setPics(response.data);\n    };\n    getPicPath();\n\n    const getLoggedIn = async () => {\n      const response = await axios.get(\n        `http://localhost:5000/user/${cookie.refreshToken}`,\n        {}\n      );\n      setLoggedIn(response.data.id);\n    };\n    getLoggedIn();\n\n    const count = async () => {\n      try {\n        const response = await axios.get(\n          `http://localhost:5000/user/fame/${id}`\n        );\n        setLikes(response.data.fame);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    count();\n\n    const checkIfLiked = async () => {\n      try {\n        const response = await axios.get(\n          `http://localhost:5000/liked/${id}/${loggedIn}`\n        );\n        setLiked(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    checkIfLiked();\n  }, [id, setSelectedUser, setLikes]);\n\n  const block = async (id) => {\n    try {\n      await axios.post(`http://localhost:5000/block/${loggedIn}/${id}`, {});\n      history.push(\"/dashboard\");\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const handleLike = async (id) => {\n    try {\n      const response = await axios.post(\n        `http://localhost:5000/like/${loggedIn}/${id}`,\n        {}\n      );\n      setMessage(response.data.msg);\n    } catch (error) {\n      if (error.response) {\n        console.log(\"error\", error.response.data);\n      }\n    }\n    socket.emit(\"sendNotification\", {\n      senderName: sender,\n      senderId: senderId,\n      receiverName: id,\n      type: \"like\",\n    });\n  };\n\n  const handleDislike = async (id) => {\n    try {\n      const response = await axios.post(\n        `http://localhost:5000/like/${loggedIn}/${id}`,\n        {}\n      );\n      setMessage(response.data.msg);\n    } catch (error) {\n      if (error.response) {\n        console.log(\"error\", error.response.data);\n      }\n    }\n    socket.emit(\"sendNotification\", {\n      senderName: sender,\n      senderId: senderId,\n      receiverName: id,\n      type: \"unlike\",\n    });\n  };\n\n  // var location = { ...distance };\n  // if (location[id - 1]) {\n  //   var getDistance = location[id - 1].distance / 1000;\n  // }\n\n  if (!cookie.refreshToken) {\n    history.push(\"/\");\n  }\n  if (!selectedUser && !distance) {\n    return <div>Loading...</div>;\n  } else {\n    return (\n      <div>\n        <div className=\"text-center\">\n          <h2 className=\"text-center\">\n            {selectedUser.firstname} {selectedUser.lastname}\n          </h2>\n          <p className=\"card-text\">{selectedUser.username}</p>\n          {/* <p className=\"text-center\">\n                About {distance && Math.round(distance[0].distance / 1000)} km away\n              </p> */}\n          <StarRating rating={likes} />\n          <div className=\"card-img\">\n            <Gallery galleryImages={pics} />\n          </div>\n          <div style={{ margin: \"10%\" }}>\n            <div className=\"card\">\n              <div className=\"heart-container\">\n                {liked ? (\n                  <div className=\"like-container\">\n                    <img\n                      onClick={() => f2(user.id)}\n                      className=\"like\"\n                      src={img}\n                      acamaras\n                      alt=\"Card cap\"\n                    />\n                  </div>\n                ) : (\n                  <div className=\"dislike-container\">\n                    <img\n                      onClick={() => f1(user.id)}\n                      className=\"dislike\"\n                      src={img1}\n                      alt=\"Card cap\"\n                    />\n                  </div>\n                )}\n              </div>{\" \"}\n              <div className=\"card-body\">\n                <label>Age</label>\n                <p className=\"card-text\">{selectedUser.birthdate}</p>\n                <label>Bio</label>\n                <p className=\"card-text\">{selectedUser.bio}</p>\n                <label>Gender</label>\n                <p className=\"card-text\">{selectedUser.gender}</p>\n                <label>Sexual Orientation</label>\n                <p className=\"card-text\">{selectedUser.orientation}</p>\n                <label>Interests</label>\n                <p className=\"card-text\">{selectedUser.interests}</p>\n              </div>\n            </div>{\" \"}\n            <br />\n            <button\n              onClick={() => block(selectedUser.id)}\n              className=\"btn btn-danger\"\n            >\n              Block\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default ProfileRandom;\n"]},"metadata":{},"sourceType":"module"}