{"ast":null,"code":"var _jsxFileName = \"/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/client/src/components/MainPage/UserCard/UserCard.js\";\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardActions from '@material-ui/core/CardActions';\nimport IconButton from '@material-ui/core/IconButton';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    paddingTop: '-150px',\n    maxWidth: 400,\n    maxHeight: 420,\n    height: 420,\n    width: 400\n  },\n  media: {\n    height: 50,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500]\n  },\n  iconcolor: {\n    color: \"#f50057\"\n  },\n  link: {\n    textDecoration: 'none'\n  },\n  heartPosition: {\n    marginLeft: '160px'\n  }\n}));\n\nconst UserCard = ({\n  user\n}) => {\n  const classes = useStyles();\n  const [profilePic, setProfilepic] = useState('');\n  const [matchStatus, setMatchStatus] = useState({\n    liked: false,\n    matched: false\n  });\n  useEffect(() => {\n    const source = axios.CancelToken.source();\n\n    const getPic = async () => {\n      try {\n        setProfilepic((await axios.get(`http://localhost:3001/api/images/${user.profile_picture_id}`, {\n          cancelToken: source.token\n        })).data.imageBlob);\n      } catch (error) {\n        if (axios.isCancel(error)) {} else {\n          throw error;\n        }\n      }\n    };\n\n    getPic();\n    return () => {\n      source.cancel();\n    };\n  }, []);\n  useEffect(() => {\n    const source = axios.CancelToken.source();\n\n    const getMatchStatus = async () => {\n      try {\n        setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`, {\n          cancelToken: source.token\n        })).data);\n      } catch (error) {\n        if (axios.isCancel(error)) {} else {\n          throw error;\n        }\n      }\n    };\n\n    getMatchStatus();\n    return () => {\n      source.cancel();\n    };\n  }, []);\n\n  const handleLike = async () => {\n    await axios.post(`http://localhost:3001/api/matches/like/${user.uid}`);\n    setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`)).data);\n  };\n\n  const handleUnlike = async () => {\n    await axios.delete(`http://localhost:3001/api/matches/like/${user.uid}`);\n    setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`)).data);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/user-profile/${user.uid}`,\n    className: classes.link,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: classes.iconcolor,\n    title: `${user.firstname} ${user.lastname}`,\n    subheader: `Popularity: ${user.popularity_score} Distance: ${Math.round(user.distance_in_miles * 0.621371)} km`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardMedia, {\n    className: classes.media,\n    image: `data:image/png;base64, ${profilePic}`,\n    title: \"profile picture\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(CardActions, {\n    disableSpacing: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: classes.heartPosition,\n    \"aria-label\": \"match\",\n    onClick: matchStatus.liked ? handleUnlike : handleLike,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tooltip, {\n    title: matchStatus.liked ? \"unlike\" : \"like\",\n    \"aria-label\": \"add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n    color: matchStatus.liked ? \"secondary\" : \"inherit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default UserCard;","map":{"version":3,"sources":["/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/client/src/components/MainPage/UserCard/UserCard.js"],"names":["React","useEffect","useState","makeStyles","Card","CardHeader","CardMedia","CardActions","IconButton","red","FavoriteIcon","axios","Link","Tooltip","useStyles","theme","root","paddingTop","maxWidth","maxHeight","height","width","media","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","iconcolor","color","link","textDecoration","heartPosition","UserCard","user","classes","profilePic","setProfilepic","matchStatus","setMatchStatus","liked","matched","source","CancelToken","getPic","get","profile_picture_id","cancelToken","token","data","imageBlob","error","isCancel","cancel","getMatchStatus","uid","handleLike","post","handleUnlike","delete","firstname","lastname","popularity_score","Math","round","distance_in_miles"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport axios from \"axios\";\r\nimport {Link} from \"react-router-dom\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    paddingTop: '-150px',\r\n    maxWidth: 400,\r\n    maxHeight: 420,\r\n    height: 420,\r\n    width: 400,\r\n  },\r\n  media: {\r\n    height: 50,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n  },\r\n  iconcolor: {\r\n    color: \"#f50057\",\r\n  },\r\n  link: {\r\n    textDecoration: 'none',\r\n  },\r\n  heartPosition: {\r\n    marginLeft: '160px',\r\n  },\r\n}));\r\n\r\nconst UserCard = ({user}) => {\r\n  const classes = useStyles();\r\n  const [profilePic, setProfilepic] = useState('')\r\n  const [matchStatus, setMatchStatus] = useState({liked: false, matched: false})\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n    \r\n    const getPic = async () => {\r\n      try {\r\n        setProfilepic((await axios.get(`http://localhost:3001/api/images/${user.profile_picture_id}`, {\r\n          cancelToken: source.token,\r\n        })).data.imageBlob)\r\n      } catch (error) {\r\n        if (axios.isCancel(error)) {\r\n        } else {\r\n            throw error\r\n        }\r\n      }\r\n    }\r\n    getPic();\r\n    return () => {\r\n      source.cancel()\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const source = axios.CancelToken.source()\r\n\r\n    const getMatchStatus = async () => {\r\n      try {\r\n         setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`, {\r\n          cancelToken: source.token,\r\n         })).data)\r\n      } catch (error) {\r\n        if (axios.isCancel(error)) {\r\n        } else {\r\n            throw error\r\n        }\r\n      }\r\n    }\r\n    getMatchStatus();\r\n    return () => {\r\n      source.cancel()\r\n    }\r\n  }, [])\r\n\r\n  const handleLike = async () => {\r\n    await axios.post(`http://localhost:3001/api/matches/like/${user.uid}`)\r\n    setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`)).data)\r\n  }\r\n  const handleUnlike = async () => {\r\n    await axios.delete(`http://localhost:3001/api/matches/like/${user.uid}`)\r\n    setMatchStatus((await axios.get(`http://localhost:3001/api/matches/like/${user.uid}`)).data)\r\n  }\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <Link to={`/user-profile/${user.uid}`} className={classes.link}>\r\n      <CardHeader\r\n        className={classes.iconcolor}\r\n        title={`${user.firstname} ${user.lastname}`}\r\n        subheader={`Popularity: ${user.popularity_score} Distance: ${Math.round(user.distance_in_miles * 0.621371)} km`}\r\n      />\r\n      <CardMedia\r\n        className={classes.media}\r\n        image={`data:image/png;base64, ${profilePic}`}\r\n        title=\"profile picture\"\r\n      />\r\n      </Link>\r\n      <CardActions disableSpacing>\r\n        <IconButton className={classes.heartPosition} aria-label=\"match\" onClick={matchStatus.liked ? handleUnlike : handleLike}>\r\n          <Tooltip title={matchStatus.liked ? \"unlike\" : \"like\"} aria-label=\"add\">\r\n            <FavoriteIcon color={matchStatus.liked ? \"secondary\" : \"inherit\"}/>\r\n          </Tooltip>\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default UserCard;"]},"metadata":{},"sourceType":"module"}