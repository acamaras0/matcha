{"ast":null,"code":"var _jsxFileName = \"/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/client/src/components/MainPage/UserProfile/UserProfile.js\";\nimport React, { useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport MenuButton from './MenuButton/MenuButton';\nimport MatchButton from './MatchButton/MatchButton';\nimport Pictures from './Pictures/Pictures';\nimport Footer from '../Footer/Footer';\nimport axios from \"axios\";\nimport { Redirect, useParams } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    height: '100vh'\n  },\n  image: {\n    backgroundImage: 'url(https://source.unsplash.com/random)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor: theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center'\n  },\n  gridList: {\n    width: 500,\n    height: 450,\n    // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n    transform: 'translateZ(0)'\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main\n  },\n  form: {\n    width: '100%',\n    // Fix IE 11 issue.\n    marginTop: theme.spacing(1)\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  },\n  divider: {\n    marginTop: '4rem'\n  },\n  cmp: {\n    margin: '5rem'\n  }\n}));\nexport default function SignInSide() {\n  const classes = useStyles();\n  const [profile, setProfile] = useState();\n  const [blocked, setBlocked] = useState(false);\n  const {\n    id\n  } = useParams(); //confusing, this id is the id of the profile shown, while user.id is logged-in user\n\n  const {\n    user\n  } = useSelector(state => state.auth);\n  useEffect(() => {\n    const source = axios.CancelToken.source();\n\n    const getProfile = async () => {\n      try {\n        const profileData = (await axios.get(`http://localhost:3001/api/users/${id}`, {\n          cancelToken: source.token\n        })).data;\n        setProfile(profileData);\n      } catch (error) {\n        if (axios.isCancel(error)) {} else {\n          setProfile(null);\n        }\n      }\n    };\n\n    if (user.id !== id) getProfile();\n    return () => {\n      source.cancel();\n    };\n  }, []);\n  if (user.id === id) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/my-account\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 12\n    }\n  });\n  if (!profile) return null;\n\n  const handleLike = async () => {\n    await axios.post(`http://localhost:3001/api/matches/like/${id}`);\n    const profileData = (await axios.get(`http://localhost:3001/api/users/${id}`)).data;\n    setProfile(profileData);\n  };\n\n  const handleUnlike = async () => {\n    await axios.delete(`http://localhost:3001/api/matches/like/${id}`);\n    setProfile({ ...profile,\n      matched: false,\n      liked: false\n    });\n  };\n\n  const handleBlock = async () => {\n    await axios.post(`http://localhost:3001/api/users/block/${user.id}/${id}`);\n    setBlocked(true);\n  };\n\n  const handleReport = async () => {\n    await axios.post(`http://localhost:3001/api/users/report/${user.id}/${id}`); // message: user reported\n  };\n\n  if (blocked) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/mainpage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 24\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, profile.firstname, \" \\\"\", profile.username, \"\\\" \", profile.lastname, /*#__PURE__*/React.createElement(MenuButton, {\n    handleBlock: handleBlock,\n    handleReport: handleReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 12\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }, profile.online ? `User is ONLINE!` : `User is offline, last seen: ${new Date(profile.last_seen)}`), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }, \"Popularity: \", profile.popularity_score, \" \", profile.popularity_score > 20 && 'ðŸ”¥'), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 5\n    }\n  }, \"Distance: \", Math.round(profile.distance_in_miles * 0.621371), \" km away\"), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, \"Orientation: \", profile.sexual_orientation, \" Gender: \", profile.gender), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    component: \"main\",\n    className: classes.root,\n    className: classes.divider,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: false,\n    sm: 6,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Pictures, {\n    imageList: profile.images,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }), \" \"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    md: 6,\n    elevation: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, \"BIO\"), /*#__PURE__*/React.createElement(Typography, {\n    component: \"h2\",\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, profile.bio)))), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: classes.divider,\n    color: \"secondary\",\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, profile.username, \"'s interests: \", profile.tags.map(tag => /*#__PURE__*/React.createElement(Button, {\n    key: tag.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 64\n    }\n  }, \"#\", tag.tag)))), /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, !profile.liked && /*#__PURE__*/React.createElement(MatchButton, {\n    matchButton: true,\n    handleClick: handleLike,\n    id: profile.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 26\n    }\n  }), profile.liked && /*#__PURE__*/React.createElement(MatchButton, {\n    handleClick: handleUnlike,\n    id: profile.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 5\n    }\n  }));\n}","map":{"version":3,"sources":["/opt/lampstack-8.1.7-0/apache2/htdocs/matcha-2.0/client/src/components/MainPage/UserProfile/UserProfile.js"],"names":["React","useEffect","useState","Button","CssBaseline","Grid","Typography","makeStyles","Container","MenuButton","MatchButton","Pictures","Footer","axios","Redirect","useParams","useSelector","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","gridList","width","transform","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","marginTop","submit","divider","cmp","SignInSide","classes","profile","setProfile","blocked","setBlocked","id","user","state","auth","source","CancelToken","getProfile","profileData","get","cancelToken","token","data","error","isCancel","cancel","handleLike","post","handleUnlike","delete","matched","liked","handleBlock","handleReport","firstname","username","lastname","online","Date","last_seen","popularity_score","Math","round","distance_in_miles","sexual_orientation","gender","images","bio","tags","map","tag","uid"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AAEA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,QAAR,EAAkBC,SAAlB,QAAkC,kBAAlC;AACA,SAAQC,WAAR,QAA0B,aAA1B;AAEA,MAAMC,SAAS,GAAGV,UAAU,CAAEW,KAAD,KAAY;AACvCC,EAAAA,IAAI,EAAE;AACJC,IAAAA,MAAM,EAAE;AADJ,GADiC;AAIvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,eAAe,EAAE,yCADZ;AAELC,IAAAA,gBAAgB,EAAE,WAFb;AAGLC,IAAAA,eAAe,EACbN,KAAK,CAACO,OAAN,CAAcC,IAAd,KAAuB,OAAvB,GAAiCR,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,EAAnB,CAAjC,GAA0DT,KAAK,CAACO,OAAN,CAAcE,IAAd,CAAmB,GAAnB,CAJvD;AAKLC,IAAAA,cAAc,EAAE,OALX;AAMLC,IAAAA,kBAAkB,EAAE;AANf,GAJgC;AAYvCC,EAAAA,QAAQ,EAAE;AACRC,IAAAA,KAAK,EAAE,GADC;AAERX,IAAAA,MAAM,EAAE,GAFA;AAGR;AACAY,IAAAA,SAAS,EAAE;AAJH,GAZ6B;AAkBvCC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAEhB,KAAK,CAACiB,OAAN,CAAc,CAAd,EAAiB,CAAjB,CADH;AAELC,IAAAA,OAAO,EAAE,MAFJ;AAGLC,IAAAA,aAAa,EAAE,QAHV;AAILC,IAAAA,UAAU,EAAE;AAJP,GAlBgC;AAwBvCC,EAAAA,MAAM,EAAE;AACNL,IAAAA,MAAM,EAAEhB,KAAK,CAACiB,OAAN,CAAc,CAAd,CADF;AAENX,IAAAA,eAAe,EAAEN,KAAK,CAACO,OAAN,CAAce,SAAd,CAAwBC;AAFnC,GAxB+B;AA4BvCC,EAAAA,IAAI,EAAE;AACJX,IAAAA,KAAK,EAAE,MADH;AACW;AACfY,IAAAA,SAAS,EAAEzB,KAAK,CAACiB,OAAN,CAAc,CAAd;AAFP,GA5BiC;AAgCvCS,EAAAA,MAAM,EAAE;AACNV,IAAAA,MAAM,EAAEhB,KAAK,CAACiB,OAAN,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AADF,GAhC+B;AAmCvCU,EAAAA,OAAO,EAAE;AACPF,IAAAA,SAAS,EAAE;AADJ,GAnC8B;AAsCvCG,EAAAA,GAAG,EAAE;AACHZ,IAAAA,MAAM,EAAE;AADL;AAtCkC,CAAZ,CAAD,CAA5B;AA2CA,eAAe,SAASa,UAAT,GAAsB;AACnC,QAAMC,OAAO,GAAG/B,SAAS,EAAzB;AACA,QAAM,CAACgC,OAAD,EAAUC,UAAV,IAAwBhD,QAAQ,EAAtC;AACA,QAAM,CAACiD,OAAD,EAAUC,UAAV,IAAwBlD,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAEmD,IAAAA;AAAF,MAAStC,SAAS,EAAxB,CAJmC,CAIP;;AAC5B,QAAM;AAACuC,IAAAA;AAAD,MAAStC,WAAW,CAACuC,KAAK,IAAIA,KAAK,CAACC,IAAhB,CAA1B;AAEAvD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMwD,MAAM,GAAG5C,KAAK,CAAC6C,WAAN,CAAkBD,MAAlB,EAAf;;AAEA,UAAME,UAAU,GAAG,YAAY;AAC7B,UAAI;AACF,cAAMC,WAAW,GAAG,CAAC,MAAM/C,KAAK,CAACgD,GAAN,CAAW,mCAAkCR,EAAG,EAAhD,EAAmD;AAC5ES,UAAAA,WAAW,EAAEL,MAAM,CAACM;AADwD,SAAnD,CAAP,EAEhBC,IAFJ;AAGAd,QAAAA,UAAU,CAACU,WAAD,CAAV;AACD,OALD,CAKE,OAAOK,KAAP,EAAc;AACd,YAAIpD,KAAK,CAACqD,QAAN,CAAeD,KAAf,CAAJ,EAA2B,CAC1B,CADD,MACO;AACLf,UAAAA,UAAU,CAAC,IAAD,CAAV;AACD;AACF;AACF,KAZD;;AAaA,QAAII,IAAI,CAACD,EAAL,KAAYA,EAAhB,EACEM,UAAU;AACZ,WAAO,MAAM;AACXF,MAAAA,MAAM,CAACU,MAAP;AACD,KAFD;AAGD,GArBQ,EAqBN,EArBM,CAAT;AAuBA,MAAIb,IAAI,CAACD,EAAL,KAAYA,EAAhB,EACE,oBAAO,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AAED,MAAI,CAACJ,OAAL,EACC,OAAO,IAAP;;AAED,QAAMmB,UAAU,GAAG,YAAY;AAC7B,UAAMvD,KAAK,CAACwD,IAAN,CAAY,0CAAyChB,EAAG,EAAxD,CAAN;AACA,UAAMO,WAAW,GAAG,CAAC,MAAM/C,KAAK,CAACgD,GAAN,CAAW,mCAAkCR,EAAG,EAAhD,CAAP,EAA2DW,IAA/E;AACAd,IAAAA,UAAU,CAACU,WAAD,CAAV;AACD,GAJD;;AAKA,QAAMU,YAAY,GAAG,YAAY;AAC/B,UAAMzD,KAAK,CAAC0D,MAAN,CAAc,0CAAyClB,EAAG,EAA1D,CAAN;AACAH,IAAAA,UAAU,CAAC,EAAC,GAAGD,OAAJ;AAAauB,MAAAA,OAAO,EAAE,KAAtB;AAA6BC,MAAAA,KAAK,EAAE;AAApC,KAAD,CAAV;AACD,GAHD;;AAKA,QAAMC,WAAW,GAAG,YAAY;AAC9B,UAAM7D,KAAK,CAACwD,IAAN,CAAY,yCAAwCf,IAAI,CAACD,EAAG,IAAGA,EAAG,EAAlE,CAAN;AACAD,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GAHD;;AAKA,QAAMuB,YAAY,GAAG,YAAY;AAC/B,UAAM9D,KAAK,CAACwD,IAAN,CAAY,0CAAyCf,IAAI,CAACD,EAAG,IAAGA,EAAG,EAAnE,CAAN,CAD+B,CAE/B;AACD,GAHD;;AAKA,MAAIF,OAAJ,EAAa,oBAAO,oBAAC,QAAD;AAAU,IAAA,EAAE,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACd,sBACE,uDACA,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEH,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,OAAO,CAAC2B,SADX,SACwB3B,OAAO,CAAC4B,QADhC,SAC4C5B,OAAO,CAAC6B,QADpD,eAEO,oBAAC,UAAD;AAAY,IAAA,WAAW,EAAEJ,WAAzB;AAAsC,IAAA,YAAY,EAAEC,YAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFP,CADA,eAKE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAE3B,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,OAAO,CAAC8B,MAAR,GAAkB,iBAAlB,GAAsC,+BAA+B,IAAIC,IAAJ,CAAS/B,OAAO,CAACgC,SAAjB,CAA6B,EADrG,CALF,eAQA,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEjC,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACmBI,OAAO,CAACiC,gBAD3B,OAC8CjC,OAAO,CAACiC,gBAAR,GAA2B,EAA3B,IAAiC,IAD/E,CARA,eAWA,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAElC,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACasC,IAAI,CAACC,KAAL,CAAWnC,OAAO,CAACoC,iBAAR,GAA4B,QAAvC,CADb,aAXA,eAcA,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAErC,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACkBI,OAAO,CAACqC,kBAD1B,eACuDrC,OAAO,CAACsC,MAD/D,CAdA,eAiBA,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAC,MAA1B;AAAiC,IAAA,SAAS,EAAEvC,OAAO,CAAC7B,IAApD;AAA0D,IAAA,SAAS,EAAE6B,OAAO,CAACH,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,KAAf;AAAsB,IAAA,EAAE,EAAE,CAA1B;AAA6B,IAAA,EAAE,EAAE,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAEI,OAAO,CAACuC,MAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,MAFF,eAIE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAA0B,IAAA,EAAE,EAAE,CAA9B;AAAiC,IAAA,SAAS,EAAE,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAC,IAAtB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,eAIE,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAC,IAAtB;AAA2B,IAAA,OAAO,EAAC,IAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGvC,OAAO,CAACwC,GADX,CAJF,CADF,CAJF,CAjBA,eAiCA,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAA4B,IAAA,QAAQ,EAAC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACA,oBAAC,UAAD;AAAY,IAAA,SAAS,EAAEzC,OAAO,CAACH,OAA/B;AAAwC,IAAA,KAAK,EAAC,WAA9C;AAA0D,IAAA,OAAO,EAAC,IAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,OAAO,CAAC4B,QADX,oBACmC5B,OAAO,CAACyC,IAAR,CAAaC,GAAb,CAAiBC,GAAG,iBAAI,oBAAC,MAAD;AAAQ,IAAA,GAAG,EAAEA,GAAG,CAACvC,EAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAuBuC,GAAG,CAACA,GAA3B,CAAxB,CADnC,CADA,CAjCA,eAsCA,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAA4B,IAAA,QAAQ,EAAC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAAC3C,OAAO,CAACwB,KAAT,iBAAkB,oBAAC,WAAD;AAAa,IAAA,WAAW,MAAxB;AAAyB,IAAA,WAAW,EAAEL,UAAtC;AAAkD,IAAA,EAAE,EAAEnB,OAAO,CAAC4C,GAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADrB,EAEG5C,OAAO,CAACwB,KAAR,iBAAiB,oBAAC,WAAD;AAAa,IAAA,WAAW,EAAEH,YAA1B;AAAwC,IAAA,EAAE,EAAErB,OAAO,CAAC4C,GAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFpB,CAtCA,eAoDA,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApDA,CADF;AAwDD","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport MenuButton from './MenuButton/MenuButton';\nimport MatchButton from './MatchButton/MatchButton';\nimport Pictures from './Pictures/Pictures';\nimport Footer from '../Footer/Footer';\nimport axios from \"axios\";\nimport {Redirect, useParams} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  image: {\n    backgroundImage: 'url(https://source.unsplash.com/random)',\n    backgroundRepeat: 'no-repeat',\n    backgroundColor:\n      theme.palette.type === 'light' ? theme.palette.grey[50] : theme.palette.grey[900],\n    backgroundSize: 'cover',\n    backgroundPosition: 'center',\n  },\n  gridList: {\n    width: 500,\n    height: 450,\n    // Promote the list into his own layer on Chrome. This cost memory but helps keeping high FPS.\n    transform: 'translateZ(0)',\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n  divider: {\n    marginTop: '4rem',\n  },\n  cmp: {\n    margin: '5rem',\n  }\n}));\n\nexport default function SignInSide() {\n  const classes = useStyles();\n  const [profile, setProfile] = useState()\n  const [blocked, setBlocked] = useState(false)\n  const { id } = useParams(); //confusing, this id is the id of the profile shown, while user.id is logged-in user\n  const {user} = useSelector(state => state.auth);\n\n  useEffect(() => {\n    const source = axios.CancelToken.source()\n\n    const getProfile = async () => {\n      try {\n        const profileData = (await axios.get(`http://localhost:3001/api/users/${id}`, {\n          cancelToken: source.token,\n        })).data\n        setProfile(profileData)\n      } catch (error) {\n        if (axios.isCancel(error)) {\n        } else {\n          setProfile(null)\n        }\n      } \n    }\n    if (user.id !== id)\n      getProfile();\n    return () => {\n      source.cancel()\n    }\n  }, [])\n\n  if (user.id === id)\n    return <Redirect to=\"/my-account\" />\n\n   if (!profile)\n    return null;\n\n   const handleLike = async () => {\n     await axios.post(`http://localhost:3001/api/matches/like/${id}`)\n     const profileData = (await axios.get(`http://localhost:3001/api/users/${id}`)).data\n     setProfile(profileData)\n   }\n   const handleUnlike = async () => {\n     await axios.delete(`http://localhost:3001/api/matches/like/${id}`)\n     setProfile({...profile, matched: false, liked: false})\n   }\n\n   const handleBlock = async () => {\n     await axios.post(`http://localhost:3001/api/users/block/${user.id}/${id}`)\n     setBlocked(true);\n   }\n\n   const handleReport = async () => {\n     await axios.post(`http://localhost:3001/api/users/report/${user.id}/${id}`)\n     // message: user reported\n   }\n\n   if (blocked) return <Redirect to=\"/mainpage\" />\n  return (\n    <>\n    <Typography className={classes.divider} color=\"secondary\" variant=\"h3\">\n      {profile.firstname} \"{profile.username}\" {profile.lastname}\n           <MenuButton handleBlock={handleBlock} handleReport={handleReport} />\n    </Typography>\n      <Typography className={classes.divider} color=\"secondary\" variant=\"h6\">\n        {profile.online ? `User is ONLINE!` : `User is offline, last seen: ${(new Date(profile.last_seen))}`}\n      </Typography>\n    <Typography className={classes.divider} color=\"secondary\" variant=\"h4\">\n          Popularity: {profile.popularity_score} {profile.popularity_score > 20 && 'ðŸ”¥'}\n    </Typography>\n    <Typography className={classes.divider} color=\"secondary\" variant=\"h4\">\n      Distance: {Math.round(profile.distance_in_miles * 0.621371)} km away\n    </Typography>\n    <Typography className={classes.divider} color=\"secondary\" variant=\"h5\">\n        Orientation: {profile.sexual_orientation} Gender: {profile.gender}\n    </Typography>\n    <Grid container component=\"main\" className={classes.root} className={classes.divider}>\n      <CssBaseline />\n      <Grid item xs={false} sm={6} md={6}>\n        <Pictures imageList={profile.images} /> </Grid>\n      <Grid item xs={12} sm={6} md={6} elevation={6}>\n        <div >\n          <Typography component=\"h1\" variant=\"h5\">\n            BIO\n          </Typography>\n          <Typography component=\"h2\" variant=\"h6\">\n            {profile.bio}\n\n          </Typography>\n        </div>\n      </Grid>\n    </Grid>\n    <Container component=\"main\" maxWidth=\"xs\">\n    <Typography className={classes.divider} color=\"secondary\" variant=\"h6\">\n      {profile.username}'s interests: {profile.tags.map(tag => <Button key={tag.id}>#{tag.tag}</Button>)}\n    </Typography>\n    </Container>\n    <Container component=\"main\" maxWidth=\"xs\">\n      {!profile.liked && <MatchButton matchButton handleClick={handleLike} id={profile.uid} />}\n      {profile.liked && <MatchButton handleClick={handleUnlike} id={profile.uid} />}\n    </Container>\n    {/* <Container component=\"main\" maxWidth=\"xs\">\n    <Blocked />\n    </Container> */}\n\n    {/*\n    \n    TODO: REPORT, BLOCK, SEE IF USER IS ONLINE IF NOT THE LAST TIME\n\n     */}\n\n    <Footer />\n    </>\n  );\n}"]},"metadata":{},"sourceType":"module"}